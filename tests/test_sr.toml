name = "Selective Repeat Delivery Test"
description = "Verify SR handles out-of-order reception and duplicate ACKs"

[config]
loss_rate = 0.0      # 理想信道，不使用随机丢包
corrupt_rate = 0.0   # 不使用随机比特差错
min_latency = 50     # 固定时延，方便推理
max_latency = 50
seed = 2718

[[actions]]
type = "app_send"
time = 100
data = "SR 0"

[[actions]]
type = "app_send"
time = 300
data = "SR 1"

[[actions]]
type = "app_send"
time = 600
data = "SR 2"

[[actions]]
type = "app_send"
time = 900
data = "SR 3"

## 为了区分 SR / GBN：在理想信道中，手动丢掉第一次发送的 seq=1 分组
[[actions]]
type = "drop_next_from_sender_seq"
seq = 1

[[assertions]]
type = "data_delivered"
data = "SR 0"

[[assertions]]
type = "data_delivered"
data = "SR 3"

[[assertions]]
type = "sender_packet_count"
min = 5
max = 5

[[assertions]]
type = "max_duration"
ms = 20000
